<script>
        const form = document.getElementById('applyForm');
        const btn = document.getElementById('submitBtn');
        const ROLE_ID = "1328405072047345758"; 

        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            btn.innerText = "Sending to the Court...";
            btn.disabled = true;

            // WICHTIG: Wir nutzen jetzt direkt den Discord Link
            const webhookURL = "https://discord.com/api/webhooks/1461516297262071890/BDLlCOM_M07jt2YIr6mU8BNMzuUm101eNRiozAZOsxwDniR9gM_X9Kkov8ya7O_pPh_8";
            const username = document.getElementById('username').value;
            
            const payload = {
                content: `⚖️ **New Application from ${username}** | <@&${ROLE_ID}>`,
                embeds: [{
                    title: "⚖️ New Guild Member Application",
                    color: 13215850,
                    fields: [
                        { name: "User", value: username, inline: true },
                        { name: "Level", value: document.getElementById('level').value, inline: true },
                        { name: "Hours daily", value: document.getElementById('hours').value, inline: true },
                        { name: "Class", value: document.getElementById('class').value, inline: true },
                        { name: "Hosts Raids?", value: document.getElementById('raids').value },
                        { name: "Daily Quests", value: document.getElementById('quests').value }
                    ],
                    footer: { text: "The Silent Court Recruitment" },
                    timestamp: new Date()
                }]
            };
            
            try {
                // Wir senden es als "no-cors", damit der Browser nicht blockiert
                await fetch(webhookURL, {
                    method: 'POST',
                    mode: 'no-cors', 
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });

                // Da 'no-cors' keine Antwort zurückgibt, gehen wir davon aus, dass es geklappt hat
                alert('Success! Your application has been sent.');
                form.reset();
            } catch (err) {
                alert('Error: Could not reach Discord.');
            } finally {
                btn.innerText = "Submit Application";
                btn.disabled = false;
            }
        });
    </script>
